<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Planning des Interventions</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript">
        function login() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            const spreadsheetId = '1rX8iqOxaW50tFGpVoYLP7sHGOTJbB2j5dIwi-kBA0Vg'; // Lien de votre Google Sheets
            const sheetName = 'Utilisateurs'; // Nom de la feuille
            const range = sheetName + '!A2:D'; // Plage des données (Email, Nom, Role, Mot de passe)
            const apiKey = 'YOUR_GOOGLE_API_KEY'; // Remplacez par votre clé API Google

            const url = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${range}?key=${apiKey}`;

            $.get(url, function(data) {
                let isAuthenticated = false;
                let userRole = "";

                // Vérifier si l'email et le mot de passe correspondent à un utilisateur dans la feuille
                for (let i = 0; i < data.values.length; i++) {
                    const row = data.values[i];
                    const storedEmail = row[0];  // Email est en colonne A
                    const storedPassword = row[3];  // Mot de passe est en colonne D

                    if (storedEmail === email && storedPassword === password) {
                        isAuthenticated = true;
                        userRole = row[2]; // Récupérer le rôle (colonne C)
                        break;
                    }
                }

                // Si l'utilisateur est authentifié
                if (isAuthenticated) {
                    alert(`Connexion réussie ! Rôle: ${userRole}`);
                    // Rediriger en fonction du rôle
                    if (userRole === 'Admin') {
                        window.location.href = 'admin_dashboard.html';
                    } else if (userRole === 'Technicien') {
                        window.location.href = 'technicien_dashboard.html';
                    } else if (userRole === 'Opérateur') {
                        window.location.href = 'operateur_dashboard.html';
                    }
                } else {
                    alert("Erreur de connexion : Email ou mot de passe incorrect.");
                }
            }).fail(function() {
                alert("Erreur lors de la récupération des données.

